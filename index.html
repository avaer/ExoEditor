<!DOCTYPE html>
<html lang="en">

<head>
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width">

	<title>ExoEditor</title>

	<style>/*!
 * Bootstrap v2.3.0
 *
 * Copyright 2012 Twitter, Inc
 * Licensed under the Apache License v2.0
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Designed and built with all the love in the world @twitter by @mdo and @fat.
 */footer,nav,section{display:block}html{font-size:100%;-webkit-text-size-adjust:100%;-ms-text-size-adjust:100%}a:focus{outline:thin dotted #333;outline:5px auto -webkit-focus-ring-color;outline-offset:-2px}a:active,a:hover{outline:0}img{height:auto;max-width:100%;vertical-align:middle;border:0;-ms-interpolation-mode:bicubic}button{margin:0;font-size:100%;vertical-align:middle}button{line-height:normal}button::-moz-focus-inner{padding:0;border:0}button{cursor:pointer;-webkit-appearance:button}button{cursor:pointer}@media print{*{color:#fff!important;text-shadow:none!important;background:0 0!important;box-shadow:none!important}a,a:visited{text-decoration:underline}a[href]:after{content:" (" attr(href) ")"}pre{border:1px solid #999;page-break-inside:avoid}img{page-break-inside:avoid}img{max-width:100%!important}@page{margin:.5cm}p{orphans:3;widows:3}}body{margin:0;line-height:20px;color:#fff;background-color:black}a{color:#fff;text-decoration:none}a:focus,a:hover{color:#fff;text-decoration:underline}.container,.navbar-fixed-top .container{width:940px}.container{margin-right:auto;margin-left:auto}.container:after,.container:before{display:table;line-height:0;content:""}.container:after{clear:both}p{margin:0 0 10px}small{font-size:85%}.text-center{text-align:center}ul{padding:0;margin:0 0 10px 25px}li{line-height:20px}hr{margin:20px 0;border:0;border-top:1px solid #eee;border-bottom:1px solid #fff}pre{padding:0 3px 2px;font-family:Monaco,Menlo,Consolas,"Courier New",monospace;font-size:12px;color:#fff;-webkit-border-radius:3px;-moz-border-radius:3px;border-radius:3px}pre{display:block;padding:9.5px;margin:0 0 10px;font-size:13px;line-height:20px;word-break:break-all;word-wrap:break-word;white-space:pre;white-space:pre-wrap;background-color:#f5f5f5;border:1px solid #ccc;border:1px solid rgba(0,0,0,.15);-webkit-border-radius:0;-moz-border-radius:0;border-radius:0}button{font-size:14px;font-weight:400;line-height:20px}button{font-family:"Open Sans",Calibri,Candara,Arial,sans-serif}[class^=icon-]{display:inline-block;width:14px;height:14px;margin-top:1px;line-height:14px;vertical-align:text-top;background-image:url(../img/glyphicons-halflings.png);background-position:14px 14px;background-repeat:no-repeat}.collapse{position:relative;height:0;overflow:hidden;-webkit-transition:height .35s ease;-moz-transition:height .35s ease;-o-transition:height .35s ease;transition:height .35s ease}.btn{display:inline-block;padding:4px 12px;margin-bottom:0;font-size:14px;line-height:20px;color:#fff;text-align:center;text-shadow:0 1px 1px rgba(255,255,255,.75);vertical-align:middle;cursor:pointer;background-color:#dfdfdf;background-image:-moz-linear-gradient(top,#eee,#c8c8c8);background-image:-webkit-gradient(linear,0 0,0 100%,from(#eee),to(#c8c8c8));background-image:-webkit-linear-gradient(top,#eee,#c8c8c8);background-image:-o-linear-gradient(top,#eee,#c8c8c8);background-image:linear-gradient(to bottom,#eee,#c8c8c8);background-repeat:repeat-x;border:1px solid #bbb;border-color:#c8c8c8 #c8c8c8 #a2a2a2;border-color:rgba(0,0,0,.1) rgba(0,0,0,.1) rgba(0,0,0,.25);border-bottom-color:#a2a2a2;-webkit-border-radius:0;-moz-border-radius:0;border-radius:0;-webkit-box-shadow:inset 0 1px 0 rgba(255,255,255,.2),0 1px 2px rgba(0,0,0,.05);-moz-box-shadow:inset 0 1px 0 rgba(255,255,255,.2),0 1px 2px rgba(0,0,0,.05);box-shadow:inset 0 1px 0 rgba(255,255,255,.2),0 1px 2px rgba(0,0,0,.05)}.btn:active,.btn:focus,.btn:hover{color:#fff;background-color:#c8c8c8}.btn:focus,.btn:hover{color:#fff;text-decoration:none;background-position:0 -15px;-webkit-transition:background-position .1s linear;-moz-transition:background-position .1s linear;-o-transition:background-position .1s linear;transition:background-position .1s linear}.btn:focus{outline:thin dotted #333;outline:5px auto -webkit-focus-ring-color;outline-offset:-2px}.btn:active{background-image:none;outline:0;-webkit-box-shadow:inset 0 2px 4px rgba(0,0,0,.15),0 1px 2px rgba(0,0,0,.05);-moz-box-shadow:inset 0 2px 4px rgba(0,0,0,.15),0 1px 2px rgba(0,0,0,.05);box-shadow:inset 0 2px 4px rgba(0,0,0,.15),0 1px 2px rgba(0,0,0,.05)}button.btn::-moz-focus-inner{padding:0;border:0}.alert{padding:8px 35px 8px 14px;margin-bottom:20px;text-shadow:0 1px 0 rgba(255,255,255,.5);background-color:#ff7518;border:1px solid transparent;-webkit-border-radius:0;-moz-border-radius:0;border-radius:0}.alert,.alert h4{color:#fff}.alert h4{margin:0}.alert .close{position:relative;top:-2px;right:-21px;line-height:20px}.alert-success{color:#fff;background-color:#3fb618;border-color:transparent}.alert-success h4{color:#fff}.alert-danger,.alert-error{color:#fff;background-color:#ff0039;border-color:transparent}.alert-danger h4,.alert-error h4{color:#fff}.alert-info{color:#fff;background-color:#9954bb;border-color:transparent}.alert-info h4{color:#fff}.alert-block{padding-top:14px;padding-bottom:14px}.alert-block>p,.alert-block>ul{margin-bottom:0}.alert-block p+p{margin-top:5px}.nav{margin-bottom:20px;margin-left:0;list-style:none}.nav>li>a{display:block}.nav>li>a:focus,.nav>li>a:hover{text-decoration:none;background-color:#eee}.navbar{margin-bottom:20px;overflow:visible}.navbar-inner{min-height:50px;padding-right:20px;padding-left:20px;background-color:#080808;background-image:-moz-linear-gradient(top,#080808,#080808);background-image:-webkit-gradient(linear,0 0,0 100%,from(#080808),to(#080808));background-image:-webkit-linear-gradient(top,#080808,#080808);background-image:-o-linear-gradient(top,#080808,#080808);background-image:linear-gradient(to bottom,#080808,#080808);background-repeat:repeat-x;border:1px solid transparent;-webkit-border-radius:0;-moz-border-radius:0;border-radius:0;-webkit-box-shadow:0 1px 4px rgba(0,0,0,.065);-moz-box-shadow:0 1px 4px rgba(0,0,0,.065);box-shadow:0 1px 4px rgba(0,0,0,.065)}.navbar-inner:after,.navbar-inner:before{display:table;line-height:0;content:""}.navbar-inner:after{clear:both}.navbar .container{width:auto}.nav-collapse.collapse{height:auto;overflow:visible}.navbar .btn{margin-top:10px}.navbar-fixed-top{position:fixed;right:0;left:0;z-index:1030;margin-bottom:0}.navbar-fixed-top .navbar-inner{border-width:0 0 1px}.navbar-fixed-top .navbar-inner{padding-right:0;padding-left:0;-webkit-border-radius:0;-moz-border-radius:0;border-radius:0}.navbar-fixed-top .container{width:940px}.navbar-fixed-top{top:0}.navbar-fixed-top .navbar-inner{-webkit-box-shadow:0 1px 10px rgba(0,0,0,.1);-moz-box-shadow:0 1px 10px rgba(0,0,0,.1);box-shadow:0 1px 10px rgba(0,0,0,.1)}.navbar .nav{position:relative;left:0;display:block;float:left;margin:0 10px 0 0}.navbar .nav>li{float:left}.navbar .nav>li>a{float:none;padding:15px 15px 15px;color:#fff;text-decoration:none;text-shadow:0 1px 0 #080808}.navbar .nav>li>a:focus,.navbar .nav>li>a:hover{color:#bbb;text-decoration:none;background-color:rgba(0,0,0,.05)}.navbar .btn-navbar{display:none;float:right;padding:7px 10px;margin-right:5px;margin-left:5px;color:#fff;text-shadow:0 -1px 0 rgba(0,0,0,.25);background-color:#000;background-image:-moz-linear-gradient(top,#000,#000);background-image:-webkit-gradient(linear,0 0,0 100%,from(#000),to(#000));background-image:-webkit-linear-gradient(top,#000,#000);background-image:-o-linear-gradient(top,#000,#000);background-image:linear-gradient(to bottom,#000,#000);background-repeat:repeat-x;border-color:#000 #000 #000;border-color:rgba(0,0,0,.1) rgba(0,0,0,.1) rgba(0,0,0,.25);-webkit-box-shadow:inset 0 1px 0 rgba(255,255,255,.1),0 1px 0 rgba(255,255,255,.075);-moz-box-shadow:inset 0 1px 0 rgba(255,255,255,.1),0 1px 0 rgba(255,255,255,.075);box-shadow:inset 0 1px 0 rgba(255,255,255,.1),0 1px 0 rgba(255,255,255,.075)}.navbar .btn-navbar:active,.navbar .btn-navbar:focus,.navbar .btn-navbar:hover{color:#fff;background-color:#000}.navbar .btn-navbar .icon-bar{display:block;width:18px;height:2px;background-color:#f5f5f5;-webkit-border-radius:1px;-moz-border-radius:1px;border-radius:1px;-webkit-box-shadow:0 1px 0 rgba(0,0,0,.25);-moz-box-shadow:0 1px 0 rgba(0,0,0,.25);box-shadow:0 1px 0 rgba(0,0,0,.25)}.btn-navbar .icon-bar+.icon-bar{margin-top:3px}.navbar-inverse .navbar-inner{background-color:#007fff;background-image:-moz-linear-gradient(top,#007fff,#007fff);background-image:-webkit-gradient(linear,0 0,0 100%,from(#007fff),to(#007fff));background-image:-webkit-linear-gradient(top,#007fff,#007fff);background-image:-o-linear-gradient(top,#007fff,#007fff);background-image:linear-gradient(to bottom,#007fff,#007fff);background-repeat:repeat-x;border-color:transparent}.navbar-inverse .nav>li>a{color:#fff;text-shadow:0 -1px 0 rgba(0,0,0,.25)}.navbar-inverse .nav>li>a:focus,.navbar-inverse .nav>li>a:hover{color:#fff}.navbar-inverse .nav>li>a:focus,.navbar-inverse .nav>li>a:hover{color:#fff;background-color:rgba(0,0,0,.05)}.navbar-inverse .btn-navbar{color:#fff;text-shadow:0 -1px 0 rgba(0,0,0,.25);background-color:#0072e6;background-image:-moz-linear-gradient(top,#0072e6,#0072e6);background-image:-webkit-gradient(linear,0 0,0 100%,from(#0072e6),to(#0072e6));background-image:-webkit-linear-gradient(top,#0072e6,#0072e6);background-image:-o-linear-gradient(top,#0072e6,#0072e6);background-image:linear-gradient(to bottom,#0072e6,#0072e6);background-repeat:repeat-x;border-color:#0072e6 #0072e6 #004c99;border-color:rgba(0,0,0,.1) rgba(0,0,0,.1) rgba(0,0,0,.25)}.navbar-inverse .btn-navbar:active,.navbar-inverse .btn-navbar:focus,.navbar-inverse .btn-navbar:hover{color:#fff;background-color:#0072e6}body{font-weight:300}.navbar .navbar-inner{background-image:none;-webkit-border-radius:0;-moz-border-radius:0;border-radius:0;-webkit-box-shadow:none;-moz-box-shadow:none;box-shadow:none}.navbar-inverse .nav>li>a{text-shadow:none}.btn{padding:5px 12px;text-shadow:none;background-image:none;border:none;-webkit-border-radius:0;-moz-border-radius:0;border-radius:0;-webkit-box-shadow:none;-moz-box-shadow:none;box-shadow:none}.alert{text-shadow:none;-webkit-border-radius:0;-moz-border-radius:0;border-radius:0}.alert h1,.alert h2,.alert h3,.alert h4,.alert h5,.alert h6,.alert-heading{color:#fff}[class^=icon-]{margin:0 2px;vertical-align:-2px}/*!
 * Bootstrap Responsive v2.3.0
 *
 * Copyright 2012 Twitter, Inc
 * Licensed under the Apache License v2.0
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Designed and built with all the love in the world @twitter by @mdo and @fat.
 */@-ms-viewport{width:device-width}@media(min-width:1200px){.container,.navbar-fixed-top .container{width:1170px}}@media(min-width:768px) and (max-width:979px){.container,.navbar-fixed-top .container{width:724px}}@media(max-width:767px){body{padding-right:20px;padding-left:20px}.navbar-fixed-top{margin-right:-20px;margin-left:-20px}.container{width:auto}}@media(max-width:480px){.nav-collapse{-webkit-transform:translate3d(0,0,0)}}@media(max-width:979px){body{padding-top:0}.navbar-fixed-top{position:static}.navbar-fixed-top{margin-bottom:20px}.navbar-fixed-top .navbar-inner{padding:5px}.navbar .container{width:auto;padding:0}.nav-collapse{clear:both}.nav-collapse .nav{float:none;margin:0 0 10px}.nav-collapse .nav>li{float:none}.nav-collapse .nav>li>a{margin-bottom:2px}.nav-collapse .nav>li>a{padding:9px 15px;font-weight:700;color:#fff;-webkit-border-radius:3px;-moz-border-radius:3px;border-radius:3px}.nav-collapse .nav>li>a:focus,.nav-collapse .nav>li>a:hover{background-color:#f2f2f2}.navbar-inverse .nav-collapse .nav>li>a{color:#999}.navbar-inverse .nav-collapse .nav>li>a:focus,.navbar-inverse .nav-collapse .nav>li>a:hover{background-color:#111}.nav-collapse,.nav-collapse.collapse{height:0;overflow:hidden}.navbar .btn-navbar{display:block}}@media(min-width:980px){.nav-collapse.collapse{height:auto!important;overflow:visible!important}}body{padding:54px 0 40px 0;overflow-y:scroll}body,button{font:400 14px/1.4em "Segoe UI","Open Sans",Calibri,Candara,Arial,sans-serif}.navbar .nav{float:left;margin-right:0}a{color:#06c;cursor:pointer}.alert h1,.alert h2,.alert h3,.alert h4,.alert h5,.alert h6,.alert-heading{color:inherit}.alert-info{color:#3a87ad;background-color:#d9edf7}.navbar-inverse .navbar-inner{background-color:#68217a;filter:none}.navbar-inverse .btn-navbar{background:0 0;margin-top:14px}.navbar-inverse .btn-navbar:active,.navbar-inverse .btn-navbar:focus,.navbar-inverse .btn-navbar:hover{background:#442359}.navbar .nav>li>a{text-shadow:none;padding-top:18px;font-size:14px;text-transform:uppercase}.navbar-inverse .nav-collapse .nav>li>a{color:#fff;padding-left:0}.navbar-inverse .nav>li>a.nav-item:focus,.navbar-inverse .nav>li>a.nav-item:hover{background-color:rgba(0,0,0,.12)}.navbar .logo{padding:16px 12px 0 0;height:35px;display:block;float:left}.navbar .logo a{color:#fff;font-size:24px;letter-spacing:-1px}.navbar-fixed-top{z-index:500}#gh-link{display:none;position:fixed;top:0;right:0;border:0;margin:0;z-index:1000}@media (min-width:980px){#gh-link{display:block}}@media (min-width:980px){.navbar .nav{float:right}.navbar-inverse .nav-collapse .nav>li>a{padding-left:15px}}@media (max-width:979px){body{padding:inherit}.navbar-fixed-top{margin-right:inherit;margin-left:inherit;margin-bottom:0}.navbar-fixed-top .navbar-inner{padding:0 20px}.navbar .container{width:724px}}@media (max-width:767px){.navbar .container{width:100%}}@media (max-width:480px){.navbar .logo a{display:none}}#loading .spinner{margin:100px auto;width:50px;height:40px;text-align:center;font-size:10px}#loading .spinner>div{background-color:#333;height:100%;width:6px;display:inline-block;-webkit-animation:sk-stretchdelay 1.2s infinite ease-in-out;animation:sk-stretchdelay 1.2s infinite ease-in-out}#loading .spinner .rect2{-webkit-animation-delay:-1.1s;animation-delay:-1.1s}#loading .spinner .rect3{-webkit-animation-delay:-1s;animation-delay:-1s}#loading .spinner .rect4{-webkit-animation-delay:-.9s;animation-delay:-.9s}#loading .spinner .rect5{-webkit-animation-delay:-.8s;animation-delay:-.8s}@-webkit-keyframes sk-stretchdelay{0%,100%,40%{-webkit-transform:scaleY(.4)}20%{-webkit-transform:scaleY(1)}}@keyframes sk-stretchdelay{0%,100%,40%{transform:scaleY(.4);-webkit-transform:scaleY(.4)}20%{transform:scaleY(1);-webkit-transform:scaleY(1)}}body{margin:0;padding:0;font-family:"Segoe UI",Arial,HelveticaNeue-Light,sans-serif;font-size:13px;overflow:hidden}.playground-page .title{font-family:"Segoe UI Light",HelveticaNeue-UltraLight,sans-serif;font-weight:100;font-size:1.8em}.playground-page .tabArea{height:20px;box-sizing:border-box;border-bottom:1px solid #999}.playground-page .tab{height:20px;line-height:20px;box-sizing:border-box;color:#fff;padding:0 8px;border:1px solid #999;border-bottom:0;cursor:pointer;float:left}.playground-page .tab.active{color:#fff;border-bottom:1px solid #fff}.playground-page .action{height:20px;line-height:20px;box-sizing:border-box;color:#fff;padding:0 5px;border:1px solid #999;border-bottom:0;cursor:pointer;float:right;padding-left:16px}.playground-page .action.run{background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAAadEVYdFNvZnR3YXJlAFBhaW50Lk5FVCB2My41LjEwMPRyoQAAAE1JREFUOE9jKCsrY6AEU6QZZPHgNeA/0Hn7gdiBUPjg8gLIABjGaxAxBuA1iBQDYAalIXuLFAOweoUYA8gOA4pigegERrRCXOlhGBgAAGmggVf7bEk0AAAAAElFTkSuQmCC) no-repeat left center}.playground-page .editor-container{border:1px solid #999;border-top:0}</style>





	<link data-name="vs/editor/editor.main" rel="stylesheet" href="node_modules/monaco-editor/min/vs/editor/editor.main.css">
</head>
<body class="playground-page">
	<pre data-preload="playground/new-samples/introduction/hello-world/sample.js" style="display:none">
	// ------------------------------------------------
	// BASIC SETUP
	// ------------------------------------------------

	// Create an empty scene
	var scene = new THREE.Scene();

	// Create a basic perspective camera
	var camera = new THREE.PerspectiveCamera( 75, window.innerWidth/window.innerHeight, 0.1, 1000 );
	camera.position.z = 4;

	// Create a renderer with Antialiasing
	var renderer = new THREE.WebGLRenderer({antialias:true});

	// Configure renderer clear color
	renderer.setClearColor("#000000");

	// Configure renderer size
	renderer.setSize( window.innerWidth, window.innerHeight );

	// Append Renderer to DOM
	document.body.appendChild( renderer.domElement );

	// ------------------------------------------------
	// FUN STARTS HERE
	// ------------------------------------------------

	// Create a Cube Mesh with basic material
	var geometry = new THREE.BoxGeometry( 1, 1, 1 );
	var material = new THREE.MeshBasicMaterial( { color: "#433F81" } );
	var cube = new THREE.Mesh( geometry, material );

	// Add cube to Scene
	scene.add( cube );

	// Render Loop
	var render = function () {
	  requestAnimationFrame( render );

	  cube.rotation.x += 0.01;
	  cube.rotation.y += 0.01;

	  // Render the scene
	  renderer.render(scene, camera);
	};

	render();
</pre>
	<pre data-preload="playground/new-samples/introduction/hello-world/sample.css" style="display:none">
</pre>
	<pre data-preload="playground/new-samples/introduction/hello-world/sample.html" style="display:none">
</pre>


	<nav class="navbar navbar-inverse navbar-fixed-top">
		<div class="navbar-inner">
			<div class="container">
				<div class="logo">
					<a href="index.html">ExoEditor</a>
				</div>
				<!-- collapse button for smaller screens -->
				<button type="button" class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
					<span class="icon-bar"></span>
					<span class="icon-bar"></span>
					<span class="icon-bar"></span>
				</button>

				<!-- navbar title -->
				<div class="nav-collapse collapse">
					<ul class="nav">
						<li><a class="nav-item" href="index.html">Editor</a></li>
						<li><a class="nav-item" href="https://webmr.io">Exokit</a></li>
					</ul>
				</div>
			</div>
		</div>
	</nav>
	<div id="loading">
		<div class="spinner">
			<div class="rect1"></div>
			<div class="rect2"></div>
			<div class="rect3"></div>
			<div class="rect4"></div>
			<div class="rect5"></div>
		</div>
	</div>

	<section id="playground">
	</section>

	<footer class="container">
		<hr>
		<p class="text-center">
			<button id="zipButton">Download packaged files</button>
		</p>
		<p class="text-center">
			<small>Copyright &copy; 2018 Zeo, Inc.</small>
		</p>
	</footer>

	<script src="dist/jszip.min.js"></script>
	<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jquery/1.9.1/jquery.min.js" integrity="sha256-wS9gmOZBqsqWxgIVgA8Y9WcQOa7PgSIX+rPA0VL2rbQ=" crossorigin="anonymous"></script>
	<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/2.3.0/bootstrap.min.js" integrity="sha256-u+l2mGjpmGK/mFgUncmMcFKdMijvV+J3odlDJZSNUu8=" crossorigin="anonymous"></script>

	<script>var require = { paths: { 'vs': 'node_modules/monaco-editor/min/vs' } };</script>
	<script src="node_modules/monaco-editor/min/vs/loader.js"></script>
	<script src="node_modules/monaco-editor/min/vs/editor/editor.main.nls.js"></script>
	<script src="node_modules/monaco-editor/min/vs/editor/editor.main.js"></script>

	<script>(function() {

		var PLAY_SAMPLES = [
			{
				chapter: "Introduction",
				name: "Hello world!",
				id: "hello-world",
				path: "introduction/hello-world"
			},
			{
				chapter: "Three.js",
				name: "Three.js Cube",
				id: "threejs1",
				path: "threejs/threejs1"
			},
			{
				chapter: "A-frame",
				name: "A-Frame WebXR Demo",
				id: "a-frame1",
				path: "a-frame/a-frame1"
			},
		];

if (typeof exports !== 'undefined') {
	exports.PLAY_SAMPLES = PLAY_SAMPLES
} else {
	self.PLAY_SAMPLES = PLAY_SAMPLES;
}

})();
</script>
	<script>/// <reference path="../../release/monaco.d.ts" />

(function() {

'use strict';

window.onload = function() {
	require(['vs/editor/editor.main'], function() {
		xhr('playground/monaco.d.ts.txt').then(function(response) {
			monaco.languages.typescript.javascriptDefaults.addExtraLib(response.responseText, 'monaco.d.ts');
			monaco.languages.typescript.javascriptDefaults.addExtraLib([
				'declare var require: {',
				'	toUrl(path: string): string;',
				'	(moduleName: string): any;',
				'	(dependencies: string[], callback: (...args: any[]) => any, errorback?: (err: any) => void): any;',
				'	config(data: any): any;',
				'	onError: Function;',
				'};',
			].join('\n'), 'require.d.ts');
		});

		var loading = document.getElementById('loading');
		loading.parentNode.removeChild(loading);
		load();

	});
};

var editor = null;
var data = {
	js: {
		model: null,
		state: null
	},
	css: {
		model: null,
		state: null
	},
	html: {
		model: null,
		state: null
	}
};

function load() {

	function layout() {
		var GLOBAL_PADDING = 20;

		var WIDTH = window.innerWidth - 2 * GLOBAL_PADDING;
		var HEIGHT = window.innerHeight;

		var TITLE_HEIGHT = 110;
		var FOOTER_HEIGHT = 80;
		var TABS_HEIGHT = 20;
		var INNER_PADDING = 20;
		var SWITCHER_HEIGHT = 30;

		var HALF_WIDTH = Math.floor((WIDTH - INNER_PADDING) / 2);
		var REMAINING_HEIGHT = HEIGHT - TITLE_HEIGHT - FOOTER_HEIGHT - SWITCHER_HEIGHT;

		playgroundContainer.style.width = WIDTH + 'px';
		playgroundContainer.style.height = (HEIGHT - FOOTER_HEIGHT) + 'px';

		sampleSwitcher.style.position = 'absolute';
		sampleSwitcher.style.top = TITLE_HEIGHT + 'px';
		sampleSwitcher.style.left = GLOBAL_PADDING + 'px';
		sampleSwitcher.style.background = 'black';
		sampleSwitcher.style.color = 'white';

		typingContainer.style.position = 'absolute';
		typingContainer.style.top = GLOBAL_PADDING + TITLE_HEIGHT + SWITCHER_HEIGHT + 'px';
		typingContainer.style.left = GLOBAL_PADDING + 'px';
		typingContainer.style.width = HALF_WIDTH + 'px';
		typingContainer.style.height = REMAINING_HEIGHT + 'px';

		tabArea.style.position = 'absolute';
		tabArea.style.boxSizing = 'border-box';
		tabArea.style.top = 0;
		tabArea.style.left = 0;
		tabArea.style.width = HALF_WIDTH + 'px';
		tabArea.style.height = TABS_HEIGHT + 'px';

		editorContainer.style.position = 'absolute';
		editorContainer.style.boxSizing = 'border-box';
		editorContainer.style.top = TABS_HEIGHT + 'px';
		editorContainer.style.left = 0;
		editorContainer.style.width = HALF_WIDTH + 'px';
		editorContainer.style.height = (REMAINING_HEIGHT - TABS_HEIGHT) + 'px';

		if (editor) {
			editor.layout({
				width: HALF_WIDTH - 2,
				height: (REMAINING_HEIGHT - TABS_HEIGHT) - 1
			});
		}

		runContainer.style.position = 'absolute';
		runContainer.style.top = GLOBAL_PADDING + TITLE_HEIGHT + SWITCHER_HEIGHT + TABS_HEIGHT + 'px';
		runContainer.style.left = GLOBAL_PADDING + INNER_PADDING + HALF_WIDTH + 'px';
		runContainer.style.width = HALF_WIDTH + 'px';
		runContainer.style.height = (REMAINING_HEIGHT - TABS_HEIGHT) + 'px';

		runIframeHeight = (REMAINING_HEIGHT - TABS_HEIGHT);
		if (runIframe) {
			runIframe.style.height = runIframeHeight + 'px';
		}
	}

	function changeTab(selectedTabNode, desiredModelId) {
		for (var i = 0; i < tabArea.childNodes.length; i++) {
			var child = tabArea.childNodes[i];
			if (/tab/.test(child.className)) {
				child.className = 'tab';
			}
		}
		selectedTabNode.className = 'tab active';

		var currentState = editor.saveViewState();

		var currentModel = editor.getModel();
		if (currentModel === data.js.model) {
			data.js.state = currentState;
		} else if (currentModel === data.css.model) {
			data.css.state = currentState;
		} else if (currentModel === data.html.model) {
			data.html.state = currentState;
		}

		editor.setModel(data[desiredModelId].model);
		editor.restoreViewState(data[desiredModelId].state);
		editor.focus();
	}


	// create the typing side
	var typingContainer = document.createElement('div');
	typingContainer.className = 'typingContainer';

	var tabArea = (function() {
		var tabArea = document.createElement('div');
		tabArea.className = 'tabArea';

		var jsTab = document.createElement('span');
		jsTab.className = 'tab active';
		jsTab.appendChild(document.createTextNode('JavaScript'));
		jsTab.onclick = function() { changeTab(jsTab, 'js'); };
		tabArea.appendChild(jsTab);

		var cssTab = document.createElement('span');
		cssTab.className = 'tab';
		cssTab.appendChild(document.createTextNode('CSS'));
		cssTab.onclick = function() { changeTab(cssTab, 'css'); };
		tabArea.appendChild(cssTab);

		var htmlTab = document.createElement('span');
		htmlTab.className = 'tab';
		htmlTab.appendChild(document.createTextNode('HTML'));
		htmlTab.onclick = function() { changeTab(htmlTab, 'html'); };
		tabArea.appendChild(htmlTab);

		var runBtn = document.createElement('span');
		runBtn.className = 'action run';
		runBtn.appendChild(document.createTextNode('Run'));
		runBtn.onclick = function() { run(); };
		tabArea.appendChild(runBtn);

		return tabArea;
	})();

	var editorContainer = document.createElement('div');
	editorContainer.className = 'editor-container';

	typingContainer.appendChild(tabArea);
	typingContainer.appendChild(editorContainer);

	var runContainer = document.createElement('div');
	runContainer.className = 'run-container';

	var sampleSwitcher = document.createElement('select');
	var sampleChapter;
	PLAY_SAMPLES.forEach(function (sample) {
		if (!sampleChapter || sampleChapter.label !== sample.chapter) {
			sampleChapter = document.createElement('optgroup');
			sampleChapter.label = sample.chapter;
			sampleSwitcher.appendChild(sampleChapter);
		}
		var sampleOption = document.createElement('option');
		sampleOption.value = sample.id;
		sampleOption.appendChild(document.createTextNode(sample.name));
		sampleChapter.appendChild(sampleOption);
	});
	sampleSwitcher.className = 'sample-switcher';

	var LOADED_SAMPLES = [];
	function findLoadedSample(sampleId) {
		for (var i = 0; i < LOADED_SAMPLES.length; i++) {
			var sample = LOADED_SAMPLES[i];
			if (sample.id === sampleId) {
				return sample;
			}
		}
		return null;
	}

	function findSamplePath(sampleId) {
		for (var i = 0; i < PLAY_SAMPLES.length; i++) {
			var sample = PLAY_SAMPLES[i];
			if (sample.id === sampleId) {
				return sample.path;
			}
		}
		return null;
	}

	function loadSample(sampleId, callback) {
		var sample = findLoadedSample(sampleId);
		if (sample) {
			return callback(null, sample);
		}

		var samplePath = findSamplePath(sampleId);
		if (!samplePath) {
			return callback(new Error('sample not found'));
		}

		samplePath = 'playground/new-samples/' + samplePath;

		var js = xhr(samplePath + '/sample.js').then(function(response) { return response.responseText});
		var css = xhr(samplePath + '/sample.css').then(function(response) { return response.responseText});
		var html = xhr(samplePath + '/sample.html').then(function(response) { return response.responseText});
		monaco.Promise.join([js, css, html]).then(function(_) {
			var js = _[0];
			var css = _[1];
			var html = _[2];
			LOADED_SAMPLES.push({
				id: sampleId,
				js: js,
				css: css,
				html: html
			});
			return callback(null, findLoadedSample(sampleId));
		}, function(err) {
			callback(err, null);
		});
	}

	sampleSwitcher.onchange = function() {
		var sampleId = sampleSwitcher.options[sampleSwitcher.selectedIndex].value;
		window.location.hash = sampleId;
	};

	var playgroundContainer = document.getElementById('playground');

	layout();
	window.onresize = layout;

	playgroundContainer.appendChild(sampleSwitcher);
	playgroundContainer.appendChild(typingContainer);
	playgroundContainer.appendChild(runContainer);

	data.js.model = monaco.editor.createModel('console.log("hi")', 'javascript');
	data.css.model = monaco.editor.createModel('css', 'css');
	data.html.model = monaco.editor.createModel('html', 'html');

	editor = monaco.editor.create(editorContainer, {
		model: data.js.model,
		theme: "vs-dark",
		minimap: {
			enabled: false
		}
	});

	var currentToken = 0;
	function parseHash(firstTime) {
		var sampleId = window.location.hash.replace(/^#/, '');
		if (!sampleId) {
			sampleId = PLAY_SAMPLES[0].id;
		}

		if (firstTime) {
			for (var i = 0; i < sampleSwitcher.options.length; i++) {
				var opt = sampleSwitcher.options[i];
				if (opt.value === sampleId) {
					sampleSwitcher.selectedIndex = i;
					break;
				}
			}
		}

		var myToken = (++currentToken);
		loadSample(sampleId, function(err, sample) {
			if (err) {
				alert('Sample not found! ' + err.message);
				return;
			}
			if (myToken !== currentToken) {
				return;
			}
			data.js.model.setValue(sample.js);
			data.html.model.setValue(sample.html);
			data.css.model.setValue(sample.css);
			editor.setScrollTop(0);
			run();
		});
	}
	window.onhashchange = parseHash;
	parseHash(true);

	function run() {
		doRun(runContainer);
	}
}

var runIframe = null, runIframeHeight = 0;
function doRun(runContainer) {
	if (runIframe) {
		// Unload old iframe
		runContainer.removeChild(runIframe);
	}

	// Load new iframe
	runIframe = document.createElement('iframe');
	runIframe.id = 'runner';
	runIframe.src = 'playground/playground-runner.html';
	runIframe.className = 'run-iframe';
	runIframe.style.boxSizing = 'border-box';
	runIframe.style.height = runIframeHeight + 'px';
	runIframe.style.width = '100%';
	runIframe.style.border = '1px solid lightgrey';
	runIframe.frameborder = '0';
	runContainer.appendChild(runIframe);

	var getLang = function(lang) {
		return data[lang].model.getValue();
	};

	function download(lang, type) {
		var data = getLang(lang);
		var filename = "testfile";
		var file = new Blob([data], {type: type});
		return file;

		/*
		var a = document.createElement("a"),
						url = URL.createObjectURL(file);
		a.href = url;
		a.download = filename;
		document.body.appendChild(a);
		a.click();
		setTimeout(function() {
				document.body.removeChild(a);
				window.URL.revokeObjectURL(url);
		}, 0);
		*/
	}

	function zipup(){
		var zip = new JSZip();
		zip.file("testfile.html", download('html', 'text/html'), {base64: true});
		zip.file("testfile.css", download('css', 'text/css'), {base64: true});
		zip.file("testfile.js", download('js', 'application/javascript'), {base64: true});
		zip.generateAsync({type:"blob"})
		zip.generateAsync({type:"base64"}).then(function (base64) {
		    location.href="data:application/zip;base64," + base64;
		});
	}
	document.getElementById ("zipButton").addEventListener('click', function(e) {
		zipup();
	});


	runIframe.addEventListener('load', function(e) {
		runIframe.contentWindow.load(getLang('js'), getLang('html'), getLang('css'));
	});
}

var preloaded = {};
(function() {
	var elements = Array.prototype.slice.call(document.querySelectorAll('pre[data-preload]'), 0);

	elements.forEach(function(el) {
		var path = el.getAttribute('data-preload');
		preloaded[path] = el.innerText || el.textContent;
		el.parentNode.removeChild(el);
	});
})();

function xhr(url) {
	if (preloaded[url]) {
		return monaco.Promise.as({
			responseText: preloaded[url]
		});
	}

	var req = null;
	return new monaco.Promise(function(c,e,p) {
		req = new XMLHttpRequest();
		req.onreadystatechange = function () {
			if (req._canceled) { return; }

			if (req.readyState === 4) {
				if ((req.status >= 200 && req.status < 300) || req.status === 1223) {
					c(req);
				} else {
					e(req);
				}
				req.onreadystatechange = function () { };
			} else {
				p(req);
			}
		};

		req.open("GET", url, true );
		req.responseType = "";

		req.send(null);
	}, function () {
		req._canceled = true;
		req.abort();
	});
}

})();</script>


</body>
</html>
